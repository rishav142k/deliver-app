{% extends 'customer/base.html' %}

{% block content %}
<div class="container mb-5">
    <div class="row justify-content-center mt-1">
        <div class="col-md-5 col-sm-12 p-4 text-center">
            <h1>Order Submitted!</h1>
            <p>You should receive a confirmation email soon.</p>
            <a href="{% url 'index' %}">Go to the homepage</a>
        </div>
    </div>

    <div class="row justify-content-center mt-5">
        <div class="col-md-5 col-sm-12 text-center">
            <h3 class="pb-3">Order Summary:</h3>
            {% for item in items.all %}
                <p>{{ item.name }} <span class="pl-3">{{ item.price }}</span></p>
            {% endfor %}

            <p class="font-weight-bold pt-4">Total: {{ price }}</p>
        </div>
    </div>
    <div class="row justify-content-center pb-2 pt-5">
        <div class="col-md-6 text-center">
            <h3>Pay Now or Pay With Cash On Delivery</h3>
        </div>
    </div>
    <div class="row justify-content-center pb-2 pt-5">
      <div id="paypal-button-container"></div>

      <!-- Include the PayPal JavaScript SDK -->
      <script src="https://www.paypal.com/sdk/js?client-id=ATPUVlwJA1tZ3nK9cPWHKbOxSATVgZFjlcY-_LvvUYqTuKO34LVGdy95p6D9bEgwvjzR0Kygj1uYvtvv&currency=INR"></script>
  
      <script>
          // Render the PayPal button into #paypal-button-container
          paypal.Buttons({
  
              // Set up the transaction
              createOrder: function(data, actions) {
                  return actions.order.create({
                      purchase_units: [{
                          amount: {
                              value: '{{ price }}'
                          }
                      }]
                  });
              },
  
              // Finalize the transaction
              onApprove: function(data, actions) {
                  return actions.order.capture().then(function(details) {
                      // Show a success message to the buyer
                      alert('Transaction completed by ' + details.payer.name.given_name + '!');
                    
                  });
              }
  
  
          }).render('#paypal-button-container');
      </script>
    </div>
{% endblock content %}
